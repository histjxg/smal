<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>23-Futureï¼šå¦‚ä½•ç”¨å¤šçº¿ç¨‹å®ç°æœ€ä¼˜çš„â€œçƒ§æ°´æ³¡èŒ¶â€ç¨‹åºï¼Ÿ</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>23-Futureï¼šå¦‚ä½•ç”¨å¤šçº¿ç¨‹å®ç°æœ€ä¼˜çš„â€œçƒ§æ°´æ³¡èŒ¶â€ç¨‹åºï¼Ÿ</h1>
<p>åœ¨ä¸Šä¸€ç¯‡æ–‡ç« <a href="https://time.geekbang.org/column/article/90771">ã€Š22 | Executorä¸çº¿ç¨‹æ± ï¼šå¦‚ä½•åˆ›å»ºæ­£ç¡®çš„çº¿ç¨‹æ± ï¼Ÿã€‹</a>ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†ä»‹ç»äº†å¦‚ä½•åˆ›å»ºæ­£ç¡®çš„çº¿ç¨‹æ± ï¼Œé‚£åˆ›å»ºå®Œçº¿ç¨‹æ± ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ä½¿ç”¨å‘¢ï¼Ÿåœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»…ä»…ä»‹ç»äº†ThreadPoolExecutorçš„ <code>void execute(Runnable command)</code> æ–¹æ³•ï¼Œåˆ©ç”¨è¿™ä¸ªæ–¹æ³•è™½ç„¶å¯ä»¥æäº¤ä»»åŠ¡ï¼Œä½†æ˜¯å´æ²¡æœ‰åŠæ³•è·å–ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼ˆexecute()æ–¹æ³•æ²¡æœ‰è¿”å›å€¼ï¼‰ã€‚è€Œå¾ˆå¤šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬åˆéƒ½æ˜¯éœ€è¦è·å–ä»»åŠ¡çš„æ‰§è¡Œç»“æœçš„ã€‚é‚£ThreadPoolExecutoræ˜¯å¦æä¾›äº†ç›¸å…³åŠŸèƒ½å‘¢ï¼Ÿå¿…é¡»çš„ï¼Œè¿™ä¹ˆé‡è¦çš„åŠŸèƒ½å½“ç„¶éœ€è¦æä¾›äº†ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±æ¥ä»‹ç»ä¸€ä¸‹ä½¿ç”¨ThreadPoolExecutorçš„æ—¶å€™ï¼Œå¦‚ä½•è·å–ä»»åŠ¡æ‰§è¡Œç»“æœã€‚</p><h2>å¦‚ä½•è·å–ä»»åŠ¡æ‰§è¡Œç»“æœ</h2><p>Javaé€šè¿‡ThreadPoolExecutoræä¾›çš„3ä¸ªsubmit()æ–¹æ³•å’Œ1ä¸ªFutureTaskå·¥å…·ç±»æ¥æ”¯æŒè·å¾—ä»»åŠ¡æ‰§è¡Œç»“æœçš„éœ€æ±‚ã€‚ä¸‹é¢æˆ‘ä»¬å…ˆæ¥ä»‹ç»è¿™3ä¸ªsubmit()æ–¹æ³•ï¼Œè¿™3ä¸ªæ–¹æ³•çš„æ–¹æ³•ç­¾åå¦‚ä¸‹ã€‚</p><pre><code>// æäº¤Runnableä»»åŠ¡
Future&lt;?&gt; 
  submit(Runnable task);
// æäº¤Callableä»»åŠ¡
&lt;T&gt; Future&lt;T&gt; 
  submit(Callable&lt;T&gt; task);
// æäº¤Runnableä»»åŠ¡åŠç»“æœå¼•ç”¨  
&lt;T&gt; Future&lt;T&gt; 
  submit(Runnable task, T result);
</code></pre><p>ä½ ä¼šå‘ç°å®ƒä»¬çš„è¿”å›å€¼éƒ½æ˜¯Futureæ¥å£ï¼ŒFutureæ¥å£æœ‰5ä¸ªæ–¹æ³•ï¼Œæˆ‘éƒ½åˆ—åœ¨ä¸‹é¢äº†ï¼Œå®ƒä»¬åˆ†åˆ«æ˜¯<strong>å–æ¶ˆä»»åŠ¡çš„æ–¹æ³•cancel()ã€åˆ¤æ–­ä»»åŠ¡æ˜¯å¦å·²å–æ¶ˆçš„æ–¹æ³•isCancelled()ã€åˆ¤æ–­ä»»åŠ¡æ˜¯å¦å·²ç»“æŸçš„æ–¹æ³•isDone()<strong>ä»¥åŠ</strong>2ä¸ªè·å¾—ä»»åŠ¡æ‰§è¡Œç»“æœçš„get()å’Œget(timeout, unit)</strong>ï¼Œå…¶ä¸­æœ€åä¸€ä¸ªget(timeout, unit)æ”¯æŒè¶…æ—¶æœºåˆ¶ã€‚é€šè¿‡Futureæ¥å£çš„è¿™5ä¸ªæ–¹æ³•ä½ ä¼šå‘ç°ï¼Œæˆ‘ä»¬æäº¤çš„ä»»åŠ¡ä¸ä½†èƒ½å¤Ÿè·å–ä»»åŠ¡æ‰§è¡Œç»“æœï¼Œè¿˜å¯ä»¥å–æ¶ˆä»»åŠ¡ã€‚ä¸è¿‡éœ€è¦æ³¨æ„çš„æ˜¯ï¼šè¿™ä¸¤ä¸ªget()æ–¹æ³•éƒ½æ˜¯é˜»å¡å¼çš„ï¼Œå¦‚æœè¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä»»åŠ¡è¿˜æ²¡æœ‰æ‰§è¡Œå®Œï¼Œé‚£ä¹ˆè°ƒç”¨get()æ–¹æ³•çš„çº¿ç¨‹ä¼šé˜»å¡ï¼Œç›´åˆ°ä»»åŠ¡æ‰§è¡Œå®Œæ‰ä¼šè¢«å”¤é†’ã€‚</p><!-- [[[read_end]]] --><pre><code>// å–æ¶ˆä»»åŠ¡
boolean cancel(
  boolean mayInterruptIfRunning);
// åˆ¤æ–­ä»»åŠ¡æ˜¯å¦å·²å–æ¶ˆ  
boolean isCancelled();
// åˆ¤æ–­ä»»åŠ¡æ˜¯å¦å·²ç»“æŸ
boolean isDone();
// è·å¾—ä»»åŠ¡æ‰§è¡Œç»“æœ
get();
// è·å¾—ä»»åŠ¡æ‰§è¡Œç»“æœï¼Œæ”¯æŒè¶…æ—¶
get(long timeout, TimeUnit unit);
</code></pre><p>è¿™3ä¸ªsubmit()æ–¹æ³•ä¹‹é—´çš„åŒºåˆ«åœ¨äºæ–¹æ³•å‚æ•°ä¸åŒï¼Œä¸‹é¢æˆ‘ä»¬ç®€è¦ä»‹ç»ä¸€ä¸‹ã€‚</p><ol>
<li>æäº¤Runnableä»»åŠ¡ <code>submit(Runnable task)</code> ï¼šè¿™ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªRunnableæ¥å£ï¼ŒRunnableæ¥å£çš„run()æ–¹æ³•æ˜¯æ²¡æœ‰è¿”å›å€¼çš„ï¼Œæ‰€ä»¥ <code>submit(Runnable task)</code> è¿™ä¸ªæ–¹æ³•è¿”å›çš„Futureä»…å¯ä»¥ç”¨æ¥æ–­è¨€ä»»åŠ¡å·²ç»ç»“æŸäº†ï¼Œç±»ä¼¼äºThread.join()ã€‚</li>
<li>æäº¤Callableä»»åŠ¡ <code>submit(Callable&lt;T&gt; task)</code>ï¼šè¿™ä¸ªæ–¹æ³•çš„å‚æ•°æ˜¯ä¸€ä¸ªCallableæ¥å£ï¼Œå®ƒåªæœ‰ä¸€ä¸ªcall()æ–¹æ³•ï¼Œå¹¶ä¸”è¿™ä¸ªæ–¹æ³•æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•è¿”å›çš„Futureå¯¹è±¡å¯ä»¥é€šè¿‡è°ƒç”¨å…¶get()æ–¹æ³•æ¥è·å–ä»»åŠ¡çš„æ‰§è¡Œç»“æœã€‚</li>
<li>æäº¤Runnableä»»åŠ¡åŠç»“æœå¼•ç”¨ <code>submit(Runnable task, T result)</code>ï¼šè¿™ä¸ªæ–¹æ³•å¾ˆæœ‰æ„æ€ï¼Œå‡è®¾è¿™ä¸ªæ–¹æ³•è¿”å›çš„Futureå¯¹è±¡æ˜¯fï¼Œf.get()çš„è¿”å›å€¼å°±æ˜¯ä¼ ç»™submit()æ–¹æ³•çš„å‚æ•°resultã€‚è¿™ä¸ªæ–¹æ³•è¯¥æ€ä¹ˆç”¨å‘¢ï¼Ÿä¸‹é¢è¿™æ®µç¤ºä¾‹ä»£ç å±•ç¤ºäº†å®ƒçš„ç»å…¸ç”¨æ³•ã€‚éœ€è¦ä½ æ³¨æ„çš„æ˜¯Runnableæ¥å£çš„å®ç°ç±»Taskå£°æ˜äº†ä¸€ä¸ªæœ‰å‚æ„é€ å‡½æ•° <code>Task(Result r)</code> ï¼Œåˆ›å»ºTaskå¯¹è±¡çš„æ—¶å€™ä¼ å…¥äº†resultå¯¹è±¡ï¼Œè¿™æ ·å°±èƒ½åœ¨ç±»Taskçš„run()æ–¹æ³•ä¸­å¯¹resultè¿›è¡Œå„ç§æ“ä½œäº†ã€‚resultç›¸å½“äºä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹ä¹‹é—´çš„æ¡¥æ¢ï¼Œé€šè¿‡å®ƒä¸»å­çº¿ç¨‹å¯ä»¥å…±äº«æ•°æ®ã€‚</li>
</ol><pre><code>ExecutorService executor 
  = Executors.newFixedThreadPool(1);
// åˆ›å»ºResultå¯¹è±¡r
Result r = new Result();
r.setAAA(a);
// æäº¤ä»»åŠ¡
Future&lt;Result&gt; future = 
  executor.submit(new Task(r), r);  
Result fr = future.get();
// ä¸‹é¢ç­‰å¼æˆç«‹
fr === r;
fr.getAAA() === a;
fr.getXXX() === x

class Task implements Runnable{
  Result r;
  //é€šè¿‡æ„é€ å‡½æ•°ä¼ å…¥result
  Task(Result r){
    this.r = r;
  }
  void run() {
    //å¯ä»¥æ“ä½œresult
    a = r.getAAA();
    r.setXXX(x);
  }
}
</code></pre><p>ä¸‹é¢æˆ‘ä»¬å†æ¥ä»‹ç»FutureTaskå·¥å…·ç±»ã€‚å‰é¢æˆ‘ä»¬æåˆ°çš„Futureæ˜¯ä¸€ä¸ªæ¥å£ï¼Œè€ŒFutureTaskæ˜¯ä¸€ä¸ªå®å®åœ¨åœ¨çš„å·¥å…·ç±»ï¼Œè¿™ä¸ªå·¥å…·ç±»æœ‰ä¸¤ä¸ªæ„é€ å‡½æ•°ï¼Œå®ƒä»¬çš„å‚æ•°å’Œå‰é¢ä»‹ç»çš„submit()æ–¹æ³•ç±»ä¼¼ï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘å°±ä¸å†èµ˜è¿°äº†ã€‚</p><pre><code>FutureTask(Callable&lt;V&gt; callable);
FutureTask(Runnable runnable, V result);
</code></pre><p>é‚£å¦‚ä½•ä½¿ç”¨FutureTaskå‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ï¼ŒFutureTaskå®ç°äº†Runnableå’ŒFutureæ¥å£ï¼Œç”±äºå®ç°äº†Runnableæ¥å£ï¼Œæ‰€ä»¥å¯ä»¥å°†FutureTaskå¯¹è±¡ä½œä¸ºä»»åŠ¡æäº¤ç»™ThreadPoolExecutorå»æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥ç›´æ¥è¢«Threadæ‰§è¡Œï¼›åˆå› ä¸ºå®ç°äº†Futureæ¥å£ï¼Œæ‰€ä»¥ä¹Ÿèƒ½ç”¨æ¥è·å¾—ä»»åŠ¡çš„æ‰§è¡Œç»“æœã€‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç æ˜¯å°†FutureTaskå¯¹è±¡æäº¤ç»™ThreadPoolExecutorå»æ‰§è¡Œã€‚</p><pre><code>// åˆ›å»ºFutureTask
FutureTask&lt;Integer&gt; futureTask
  = new FutureTask&lt;&gt;(()-&gt; 1+2);
// åˆ›å»ºçº¿ç¨‹æ± 
ExecutorService es = 
  Executors.newCachedThreadPool();
// æäº¤FutureTask 
es.submit(futureTask);
// è·å–è®¡ç®—ç»“æœ
Integer result = futureTask.get();
</code></pre><p>FutureTaskå¯¹è±¡ç›´æ¥è¢«Threadæ‰§è¡Œçš„ç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚ç›¸ä¿¡ä½ å·²ç»å‘ç°äº†ï¼Œåˆ©ç”¨FutureTaskå¯¹è±¡å¯ä»¥å¾ˆå®¹æ˜“è·å–å­çº¿ç¨‹çš„æ‰§è¡Œç»“æœã€‚</p><pre><code>// åˆ›å»ºFutureTask
FutureTask&lt;Integer&gt; futureTask
  = new FutureTask&lt;&gt;(()-&gt; 1+2);
// åˆ›å»ºå¹¶å¯åŠ¨çº¿ç¨‹
Thread T1 = new Thread(futureTask);
T1.start();
// è·å–è®¡ç®—ç»“æœ
Integer result = futureTask.get();
</code></pre><h2>å®ç°æœ€ä¼˜çš„â€œçƒ§æ°´æ³¡èŒ¶â€ç¨‹åº</h2><p>è®°å¾—ä»¥å‰åˆä¸­è¯­æ–‡è¯¾æ–‡é‡Œæœ‰ä¸€ç¯‡è‘—åæ•°å­¦å®¶åç½—åºšå…ˆç”Ÿçš„æ–‡ç« ã€Šç»Ÿç­¹æ–¹æ³•ã€‹ï¼Œè¿™ç¯‡æ–‡ç« é‡Œä»‹ç»äº†ä¸€ä¸ªçƒ§æ°´æ³¡èŒ¶çš„ä¾‹å­ï¼Œæ–‡ä¸­æåˆ°æœ€ä¼˜çš„å·¥åºåº”è¯¥æ˜¯ä¸‹é¢è¿™æ ·ï¼š</p><p><img src="https://static001.geekbang.org/resource/image/86/ce/86193a2dba88dd15562118cce6d786ce.png" alt=""></p><center><span class="reference">çƒ§æ°´æ³¡èŒ¶æœ€ä¼˜å·¥åº</span></center><p>ä¸‹é¢æˆ‘ä»¬ç”¨ç¨‹åºæ¥æ¨¡æ‹Ÿä¸€ä¸‹è¿™ä¸ªæœ€ä¼˜å·¥åºã€‚æˆ‘ä»¬ä¸“æ å‰é¢æ›¾ç»æåˆ°ï¼Œå¹¶å‘ç¼–ç¨‹å¯ä»¥æ€»ç»“ä¸ºä¸‰ä¸ªæ ¸å¿ƒé—®é¢˜ï¼šåˆ†å·¥ã€åŒæ­¥å’Œäº’æ–¥ã€‚ç¼–å†™å¹¶å‘ç¨‹åºï¼Œé¦–å…ˆè¦åšçš„å°±æ˜¯åˆ†å·¥ï¼Œæ‰€è°“åˆ†å·¥æŒ‡çš„æ˜¯å¦‚ä½•é«˜æ•ˆåœ°æ‹†è§£ä»»åŠ¡å¹¶åˆ†é…ç»™çº¿ç¨‹ã€‚å¯¹äºçƒ§æ°´æ³¡èŒ¶è¿™ä¸ªç¨‹åºï¼Œä¸€ç§æœ€ä¼˜çš„åˆ†å·¥æ–¹æ¡ˆå¯ä»¥æ˜¯ä¸‹å›¾æ‰€ç¤ºçš„è¿™æ ·ï¼šç”¨ä¸¤ä¸ªçº¿ç¨‹T1å’ŒT2æ¥å®Œæˆçƒ§æ°´æ³¡èŒ¶ç¨‹åºï¼ŒT1è´Ÿè´£æ´—æ°´å£¶ã€çƒ§å¼€æ°´ã€æ³¡èŒ¶è¿™ä¸‰é“å·¥åºï¼ŒT2è´Ÿè´£æ´—èŒ¶å£¶ã€æ´—èŒ¶æ¯ã€æ‹¿èŒ¶å¶ä¸‰é“å·¥åºï¼Œå…¶ä¸­T1åœ¨æ‰§è¡Œæ³¡èŒ¶è¿™é“å·¥åºæ—¶éœ€è¦ç­‰å¾…T2å®Œæˆæ‹¿èŒ¶å¶çš„å·¥åºã€‚å¯¹äºT1çš„è¿™ä¸ªç­‰å¾…åŠ¨ä½œï¼Œä½ åº”è¯¥å¯ä»¥æƒ³å‡ºå¾ˆå¤šç§åŠæ³•ï¼Œä¾‹å¦‚Thread.join()ã€CountDownLatchï¼Œç”šè‡³é˜»å¡é˜Ÿåˆ—éƒ½å¯ä»¥è§£å†³ï¼Œä¸è¿‡ä»Šå¤©æˆ‘ä»¬ç”¨Futureç‰¹æ€§æ¥å®ç°ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/9c/8e/9cf7d188af9119a5e76788466b453d8e.png" alt=""></p><center><span class="reference">çƒ§æ°´æ³¡èŒ¶æœ€ä¼˜åˆ†å·¥æ–¹æ¡ˆ</span></center><p>ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å°±æ˜¯ç”¨è¿™ä¸€ç« æåˆ°çš„Futureç‰¹æ€§æ¥å®ç°çš„ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªFutureTaskâ€”â€”ft1å’Œft2ï¼Œft1å®Œæˆæ´—æ°´å£¶ã€çƒ§å¼€æ°´ã€æ³¡èŒ¶çš„ä»»åŠ¡ï¼Œft2å®Œæˆæ´—èŒ¶å£¶ã€æ´—èŒ¶æ¯ã€æ‹¿èŒ¶å¶çš„ä»»åŠ¡ï¼›è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ft1è¿™ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œæ³¡èŒ¶ä»»åŠ¡å‰ï¼Œéœ€è¦ç­‰å¾…ft2æŠŠèŒ¶å¶æ‹¿æ¥ï¼Œæ‰€ä»¥ft1å†…éƒ¨éœ€è¦å¼•ç”¨ft2ï¼Œå¹¶åœ¨æ‰§è¡Œæ³¡èŒ¶ä¹‹å‰ï¼Œè°ƒç”¨ft2çš„get()æ–¹æ³•å®ç°ç­‰å¾…ã€‚</p><pre><code>// åˆ›å»ºä»»åŠ¡T2çš„FutureTask
FutureTask&lt;String&gt; ft2
  = new FutureTask&lt;&gt;(new T2Task());
// åˆ›å»ºä»»åŠ¡T1çš„FutureTask
FutureTask&lt;String&gt; ft1
  = new FutureTask&lt;&gt;(new T1Task(ft2));
// çº¿ç¨‹T1æ‰§è¡Œä»»åŠ¡ft1
Thread T1 = new Thread(ft1);
T1.start();
// çº¿ç¨‹T2æ‰§è¡Œä»»åŠ¡ft2
Thread T2 = new Thread(ft2);
T2.start();
// ç­‰å¾…çº¿ç¨‹T1æ‰§è¡Œç»“æœ
System.out.println(ft1.get());

// T1Taskéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼š
// æ´—æ°´å£¶ã€çƒ§å¼€æ°´ã€æ³¡èŒ¶
class T1Task implements Callable&lt;String&gt;{
  FutureTask&lt;String&gt; ft2;
  // T1ä»»åŠ¡éœ€è¦T2ä»»åŠ¡çš„FutureTask
  T1Task(FutureTask&lt;String&gt; ft2){
    this.ft2 = ft2;
  }
  @Override
  String call() throws Exception {
    System.out.println(&quot;T1:æ´—æ°´å£¶...&quot;);
    TimeUnit.SECONDS.sleep(1);
    
    System.out.println(&quot;T1:çƒ§å¼€æ°´...&quot;);
    TimeUnit.SECONDS.sleep(15);
    // è·å–T2çº¿ç¨‹çš„èŒ¶å¶  
    String tf = ft2.get();
    System.out.println(&quot;T1:æ‹¿åˆ°èŒ¶å¶:&quot;+tf);

    System.out.println(&quot;T1:æ³¡èŒ¶...&quot;);
    return &quot;ä¸ŠèŒ¶:&quot; + tf;
  }
}
// T2Taskéœ€è¦æ‰§è¡Œçš„ä»»åŠ¡:
// æ´—èŒ¶å£¶ã€æ´—èŒ¶æ¯ã€æ‹¿èŒ¶å¶
class T2Task implements Callable&lt;String&gt; {
  @Override
  String call() throws Exception {
    System.out.println(&quot;T2:æ´—èŒ¶å£¶...&quot;);
    TimeUnit.SECONDS.sleep(1);

    System.out.println(&quot;T2:æ´—èŒ¶æ¯...&quot;);
    TimeUnit.SECONDS.sleep(2);

    System.out.println(&quot;T2:æ‹¿èŒ¶å¶...&quot;);
    TimeUnit.SECONDS.sleep(1);
    return &quot;é¾™äº•&quot;;
  }
}
// ä¸€æ¬¡æ‰§è¡Œç»“æœï¼š
T1:æ´—æ°´å£¶...
T2:æ´—èŒ¶å£¶...
T1:çƒ§å¼€æ°´...
T2:æ´—èŒ¶æ¯...
T2:æ‹¿èŒ¶å¶...
T1:æ‹¿åˆ°èŒ¶å¶:é¾™äº•
T1:æ³¡èŒ¶...
ä¸ŠèŒ¶:é¾™äº•
</code></pre><h2>æ€»ç»“</h2><p>åˆ©ç”¨Javaå¹¶å‘åŒ…æä¾›çš„Futureå¯ä»¥å¾ˆå®¹æ˜“è·å¾—å¼‚æ­¥ä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼Œæ— è®ºå¼‚æ­¥ä»»åŠ¡æ˜¯é€šè¿‡çº¿ç¨‹æ± ThreadPoolExecutoræ‰§è¡Œçš„ï¼Œè¿˜æ˜¯é€šè¿‡æ‰‹å·¥åˆ›å»ºå­çº¿ç¨‹æ¥æ‰§è¡Œçš„ã€‚Futureå¯ä»¥ç±»æ¯”ä¸ºç°å®ä¸–ç•Œé‡Œçš„æè´§å•ï¼Œæ¯”å¦‚å»è›‹ç³•åº—è®¢ç”Ÿæ—¥è›‹ç³•ï¼Œè›‹ç³•åº—éƒ½æ˜¯å…ˆç»™ä½ ä¸€å¼ æè´§å•ï¼Œä½ æ‹¿åˆ°æè´§å•ä¹‹åï¼Œæ²¡æœ‰å¿…è¦ä¸€ç›´åœ¨åº—é‡Œç­‰ç€ï¼Œå¯ä»¥å…ˆå»å¹²ç‚¹å…¶ä»–äº‹ï¼Œæ¯”å¦‚çœ‹åœºç”µå½±ï¼›ç­‰çœ‹å®Œç”µå½±åï¼ŒåŸºæœ¬ä¸Šè›‹ç³•ä¹Ÿåšå¥½äº†ï¼Œç„¶åä½ å°±å¯ä»¥å‡­æè´§å•é¢†è›‹ç³•äº†ã€‚</p><p>åˆ©ç”¨å¤šçº¿ç¨‹å¯ä»¥å¿«é€Ÿå°†ä¸€äº›ä¸²è¡Œçš„ä»»åŠ¡å¹¶è¡ŒåŒ–ï¼Œä»è€Œæé«˜æ€§èƒ½ï¼›å¦‚æœä»»åŠ¡ä¹‹é—´æœ‰ä¾èµ–å…³ç³»ï¼Œæ¯”å¦‚å½“å‰ä»»åŠ¡ä¾èµ–å‰ä¸€ä¸ªä»»åŠ¡çš„æ‰§è¡Œç»“æœï¼Œè¿™ç§é—®é¢˜åŸºæœ¬ä¸Šéƒ½å¯ä»¥ç”¨Futureæ¥è§£å†³ã€‚åœ¨åˆ†æè¿™ç§é—®é¢˜çš„è¿‡ç¨‹ä¸­ï¼Œå»ºè®®ä½ ç”¨æœ‰å‘å›¾æè¿°ä¸€ä¸‹ä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼ŒåŒæ—¶å°†çº¿ç¨‹çš„åˆ†å·¥ä¹Ÿåšå¥½ï¼Œç±»ä¼¼äºçƒ§æ°´æ³¡èŒ¶æœ€ä¼˜åˆ†å·¥æ–¹æ¡ˆé‚£å¹…å›¾ã€‚å¯¹ç…§å›¾æ¥å†™ä»£ç ï¼Œå¥½å¤„æ˜¯æ›´å½¢è±¡ï¼Œä¸”ä¸æ˜“å‡ºé”™ã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>ä¸ä¹…å‰å¬è¯´å°æ˜è¦åšä¸€ä¸ªè¯¢ä»·åº”ç”¨ï¼Œè¿™ä¸ªåº”ç”¨éœ€è¦ä»ä¸‰ä¸ªç”µå•†è¯¢ä»·ï¼Œç„¶åä¿å­˜åœ¨è‡ªå·±çš„æ•°æ®åº“é‡Œã€‚æ ¸å¿ƒç¤ºä¾‹ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œç”±äºæ˜¯ä¸²è¡Œçš„ï¼Œæ‰€ä»¥æ€§èƒ½å¾ˆæ…¢ï¼Œä½ æ¥è¯•ç€ä¼˜åŒ–ä¸€ä¸‹å§ã€‚</p><pre><code>// å‘ç”µå•†S1è¯¢ä»·ï¼Œå¹¶ä¿å­˜
r1 = getPriceByS1();
save(r1);
// å‘ç”µå•†S2è¯¢ä»·ï¼Œå¹¶ä¿å­˜
r2 = getPriceByS2();
// å‘ç”µå•†S3è¯¢ä»·ï¼Œå¹¶ä¿å­˜
r3 = getPriceByS3();
</code></pre><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/cf/aa/cf393cd748a4f0e6451807c4b61843aa.jpg" alt=""></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            QQæ€ª  2019-04-20 18:14:44
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆï¼Œåœ¨æäº¤ Runnable ä»»åŠ¡åŠç»“æœå¼•ç”¨çš„ä¾‹å­é‡Œé¢çš„xå˜é‡æ˜¯ä»€ä¹ˆ? [1èµ]
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-20 22:02:54</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ä»»æ„çš„ä¸œè¥¿ï¼Œæƒ³æˆæ•°å­—0ä¹Ÿè¡Œ</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            QQæ€ª  2019-04-20 12:41:39
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            åœ¨å®é™…é¡¹ç›®ä¸­åº”ç”¨å·²ç»åº”ç”¨åˆ°äº†Feture,ä½†æ²¡æœ‰ä½¿ç”¨çº¿ç¨‹æ± ï¼Œæ²¡æœ‰é‚£ä¹ˆä¼˜é›…ï¼Œæ‰€ä»¥ç®—æ˜¯getåˆ°äº†ğŸ‘ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å¼ ä¸‰  2019-04-20 09:21:09
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ‰“å¡ã€‚æ„Ÿè§‰å¾ˆç¥å¥‡ï¼Œä¹‹å‰å®Œå…¨ä¸ä¼šç”¨ã€‚å­¦çš„çŸ¥è¯†å¤ªé™ˆæ—§äº†ï¼Œç»§ç»­å­¦ä¹ ã€‚ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            vector  2019-04-21 23:37:15
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æœ€è¿‘ä½¿ç”¨CompletableFutureå·¥å…·æ–¹æ³•ä»¥åŠlamdaè¡¨è¾¾å¼æ¯”è¾ƒå¤šï¼Œè¯­è¨€è¯­æ³•çš„å˜åŒ–å¸¦æ¥ç¼–ç æ•ˆç‡çš„æå‡çœŸçš„å¾ˆå¤§ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å¼ å¾·  2019-04-21 23:27:13
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘ä¹ŸåŒæ„å¼ å¤©å±¹åŒå­¦çš„è§‚ç‚¹   è¿™ä¸ªè¯¢ä»·æ“ä½œå¦‚æœä¹‹é—´æ²¡æœ‰è”ç³»çš„è¯  ç›´æ¥èµ·ä¸‰ä¸ªçº¿ç¨‹å°±å¯ä»¥äº† è€å¸ˆèƒ½ä¸èƒ½è®²ä¸€ä¸‹ ç”¨çº¿ç¨‹æ± æ€ä¹ˆå°±æœ‰å…³è”äº†ï¼Ÿ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Asanz  2019-04-21 18:15:07
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä¸æ˜¯ä¸å»ºè®®ä½¿ç”¨ Executors åˆ›å»ºçº¿ç¨‹æ± äº†å—ï¼Ÿï¼Ÿï¼Ÿ<br> 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æé±¼çš„æ¬ç –å¥‡  2019-04-21 02:48:18
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆä¸ºä»€ä¹ˆæˆ‘ä¸‹é¢å†™æ³•t2Task.get(); ä¸€ç›´åœ¨ç­‰å¾…<br>public class PaoCha {<br><br>    public static class T1Task implements Runnable{<br>        private Future&lt;T2Task&gt; t2Task;<br>        T1Task(Future&lt;T2Task&gt; t2Task) {<br>            this.t2Task = t2Task;<br>        }<br>        @Override<br>        public void run() {<br>            try {<br>                System.out.println( &quot;T1:æ´—æ°´å£¶&quot;);<br>                TimeUnit.SECONDS.sleep(1);<br>                System.out.println( &quot;T1:çƒ§å¼€æ°´&quot;);<br>                TimeUnit.SECONDS.sleep(15);<br>                t2Task.get();<br>                System.out.println( &quot;T1:æ‹¿åˆ°èŒ¶å¶&quot;);<br><br>                System.out.println( &quot;T1:æ³¡èŒ¶&quot;);<br>                System.out.println( &quot;ä¸ŠèŒ¶&quot;);<br>            } catch (InterruptedException e) {<br>                e.printStackTrace();<br>            } catch (ExecutionException e) {<br>                e.printStackTrace();<br>            }<br><br>        }<br>    }<br>    public static  class T2Task implements Runnable {<br><br>        @Override<br>        public void run() {<br>            try {<br>                System.out.println( &quot;T2:æ´—èŒ¶å£¶&quot;);<br>                TimeUnit.SECONDS.sleep(1);<br>                System.out.println( &quot;T2:æ´—èŒ¶æ¯&quot;);<br>                TimeUnit.SECONDS.sleep(2);<br>                System.out.println( &quot;T2:æ‹¿èŒ¶å¶&quot;);<br>                TimeUnit.SECONDS.sleep(1);<br>                System.out.println( &quot;T2:é¾™äº•&quot;);<br>            } catch (InterruptedException e) {<br>                e.printStackTrace();<br>            }<br>        }<br>    }<br><br>    public static void main(String[] args) {<br>        T2Task t2 = new T2Task();<br>        Future&lt;T2Task&gt; t2TaskFuture = new FutureTask&lt;&gt;(() -&gt;t2);<br>        ExecutorService executorService = Executors.newFixedThreadPool(1);<br>        executorService.submit(t2);<br><br>        T1Task t1 = new T1Task(t2TaskFuture);<br>        ExecutorService executorService1 = Executors.newFixedThreadPool(1);<br>        executorService1.submit(t1);<br><br>    }<br><br>} 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æé±¼çš„æ¬ç –å¥‡  2019-04-21 01:44:29
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            Futureçš„get()æ˜¯æ‹¿åˆ°ä»»åŠ¡çš„æ‰§è¡Œç»“æœä¸å§ã€‚ä¸ºä»€ä¹ˆåˆè¯´æ˜¯æ‹¿åˆ°æ–¹æ³•çš„å…¥å‚äº†ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            aroll  2019-04-20 17:59:54
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            å»ºè®®å¹¶å‘ç¼–ç¨‹è¯¾ç¨‹ä¸­çš„Demoä»£ç ï¼Œå°½é‡å°‘ä½¿ç”¨System.out.println, å› ä¸ºå…¶å®ç°æœ‰ä½¿ç”¨éšå¼é”ï¼Œä¸€äº›æƒ…å†µè¿˜ä¼šæœ‰é”ç²—åŒ–äº§ç”Ÿ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-20 22:07:03</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">å¥½å»ºè®®</div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            zhangtnty  2019-04-20 10:01:29
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ç‹è€å¸ˆå¥½ï¼Œæ–‡ä¸­ä¸€é¢˜å¯ä»¥é€šè¿‡future.get()å­çº¿ç¨‹æ–¹å¼å®ç°ï¼Œè‡ªè¡Œåˆ›å»ºçº¿ç¨‹æˆ–åˆ›å»ºçº¿ç¨‹æ± éƒ½å¯ä»¥ï¼Œæ¯ä¸ªçº¿ç¨‹futureè‡ªå·±çš„ç»“æœï¼Œç„¶åä¿å­˜å³å¯ï¼Œå¦‚æœå‡ ä¸ªç»“æœæ²¡æœ‰å…³è”å¯ä»¥ä½¿ç”¨å¤šçº¿ç¨‹è·å¾—ç»“æœå¾ˆå®¹æ˜“å®ç°ã€‚<br>å¦‚æœå­˜åœ¨å…³ç³»ï¼Œæ¯”å¦‚ç«ä»·å–æœ€ä½ä»·æ ¼ï¼Œè¿™æ ·å¯èƒ½è¦å¤æ‚çš„å¤š(å°¤å…¶æ˜¯éœ€è¦é€‚æ—¶ç«ä»·è¿™ç§)ã€‚æˆ‘æƒ³åˆ°çš„æ˜¯ï¼šçº¿ç¨‹ä¸é˜»å¡ã€ç»“æœå…¥ç¼“å­˜ã€å¼‚æ­¥ä»»åŠ¡åˆ·æ–°ç¼“å­˜ç«ä»·ã€åŠ¨æ€å˜æ›´å‰æ®µå±•ç¤ºã€‚ä¹Ÿæƒ³é—®ä¸€ä¸‹ç‹è€å¸ˆï¼Œè¿˜æœ‰æ²¡æœ‰æ›´ä¼˜çš„æ–¹æ¡ˆï¼Œè°¢è°¢ï¼ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            undifined  2019-04-20 08:42:10
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è¯¾åé¢˜ï¼š<br>å¯ä»¥ç”¨ Future<br>        ExecutorService threadPoolExecutor = Executors.newFixedThreadPool(3);<br>        Future&lt;R&gt; future1 = threadPoolExecutor.submit(Test::getPriceByS1);<br>        Future&lt;R&gt; future2 = threadPoolExecutor.submit(Test::getPriceByS2);<br>        Future&lt;R&gt; future3 = threadPoolExecutor.submit(Test::getPriceByS3);<br>        R r1 = future1.get();<br>        R r2 = future2.get();<br>        R r3 = future3.get();<br><br>ä¹Ÿå¯ä»¥ç”¨ CompletableFuture<br>        CompletableFuture&lt;R&gt; completableFuture1 = CompletableFuture.supplyAsync(Test::getPriceByS1);<br>        CompletableFuture&lt;R&gt; completableFuture2 = CompletableFuture.supplyAsync(Test::getPriceByS2);<br>        CompletableFuture&lt;R&gt; completableFuture3 = CompletableFuture.supplyAsync(Test::getPriceByS3);<br>        CompletableFuture.allOf(completableFuture1, completableFuture2, completableFuture3)<br>                         .thenAccept(System.out::println);<br> è€å¸ˆè¿™æ ·ç†è§£å¯¹å— è°¢è°¢è€å¸ˆ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            henry  2019-04-20 08:29:44
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ç°åœ¨æ˜¯åœ¨ä¸»çº¿ç¨‹ä¸²è¡Œå®Œæˆ3ä¸ªè¯¢ä»·çš„ä»»åŠ¡ï¼Œæ‰§è¡Œç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œå…¶å®ƒ2ä¸ªä»»åŠ¡åªèƒ½ç­‰å¾…æ‰§è¡Œï¼Œå¦‚æœè¦æé«˜æ•ˆç‡ï¼Œè¿™ä¸ªåœ°æ–¹éœ€è¦æ”¹è¿›ï¼Œå¯ä»¥ç”¨è€å¸ˆä»Šå¤©è®²çš„futuretaskï¼Œä¸‰ä¸ªè¯¢ä»·ä»»åŠ¡æ”¹æˆfuturetaskå¹¶è¡Œæ‰§è¡Œï¼Œæ•ˆç‡ä¼šæé«˜ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-20 13:21:56</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ğŸ‘<br></div>
</div>
            
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å¼ å¤©å±¹  2019-04-20 07:50:51
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘ä¸çŸ¥é“æ˜¯ä¸æ˜¯ç†è§£é”™è€å¸ˆæ„æ€äº†ï¼Œå…ˆåˆ†æä¾èµ–æœ‰å‘å›¾ï¼Œå¯ä»¥çœ‹åˆ°ä¸‰æ¡çº¿ï¼Œæ²¡æœ‰å…¥åº¦&gt;1çš„èŠ‚ç‚¹<br>é‚£ä¹ˆå¯åŠ¨ä¸‰ä¸ªçº¿ç¨‹å³å¯ã€‚<br>å›¾ï¼š<br>s1è¯¢ä»· -&gt; s1ä¿å­˜  <br>s2è¯¢ä»· -&gt; s2ä¿å­˜<br>s3è¯¢ä»· -&gt; s3ä¿å­˜  <br>ä»£ç ï¼š<br>        new Thread(() -&gt; {<br>        	r1 = getPriceByS1();<br>        	save(r1);<br>        }).start();<br>        new Thread(() -&gt; {<br>        	r2 = getPriceByS2();<br>        	save(r2);<br>        }).start();<br>        new Thread(() -&gt; {<br>        	r3 = getPriceByS3();<br>        	save(r3);<br>        }).start();<br>æˆ‘è§‰å¾—è¿™é‡Œä¸éœ€è¦future,é™¤éè¯¢ä»·å’Œä¿å­˜ä¹‹é—´è¿˜æœ‰åˆ«çš„è®¡ç®—å·¥ä½œ 
        </div>
        <br/>
<div>
    <div style="color:#888;font-size:15.25px;font-weight:400;line-height:1.2">ä½œè€…å›å¤2019-04-20 13:22:57</div>
    <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">ç”¨çº¿ç¨‹æ± å°±ç”¨åˆ°äº†</div>
</div>
            
    </div>
</li>
            </ul>
</div>
</body>
</html>