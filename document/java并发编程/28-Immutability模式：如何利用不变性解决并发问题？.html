<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>28-Immutabilityæ¨¡å¼ï¼šå¦‚ä½•åˆ©ç”¨ä¸å˜æ€§è§£å†³å¹¶å‘é—®é¢˜ï¼Ÿ</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <style>
        html {
            color: #333;
            -webkit-text-size-adjust: 100%;
            -ms-text-size-adjust: 100%;
            text-rendering: optimizelegibility;
            font-family: Helvetica Neue, PingFang SC, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif
        }

        html.borderbox *,
        html.borderbox :after,
        html.borderbox :before {
            box-sizing: border-box
        }

        article,
        aside,
        blockquote,
        body,
        button,
        code,
        dd,
        details,
        dl,
        dt,
        fieldset,
        figcaption,
        figure,
        footer,
        form,
        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        header,
        hr,
        input,
        legend,
        li,
        menu,
        nav,
        ol,
        p,
        pre,
        section,
        td,
        textarea,
        th,
        ul {
            margin: 0;
            padding: 0
        }

        article,
        aside,
        details,
        figcaption,
        figure,
        footer,
        header,
        menu,
        nav,
        section {
            display: block
        }

        audio,
        canvas,
        video {
            display: inline-block
        }

        body,
        button,
        input,
        select,
        textarea {
            font: 300 1em/1.8 PingFang SC, Lantinghei SC, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, Helvetica, sans-serif
        }

        button::-moz-focus-inner,
        input::-moz-focus-inner {
            padding: 0;
            border: 0
        }

        table {
            border-collapse: collapse;
            border-spacing: 0
        }

        fieldset,
        img {
            border: 0
        }

        blockquote {
            position: relative;
            color: #999;
            font-weight: 400;
            border-left: 1px solid #1abc9c;
            padding-left: 1em;
            margin: 1em 3em 1em 2em
        }

        @media only screen and (max-width: 640px) {
            blockquote {
                margin: 1em 0
            }
        }

        abbr,
        acronym {
            border-bottom: 1px dotted;
            font-variant: normal
        }

        abbr {
            cursor: help
        }

        del {
            text-decoration: line-through
        }

        address,
        caption,
        cite,
        code,
        dfn,
        em,
        th,
        var {
            font-style: normal;
            font-weight: 400
        }

        ol,
        ul {
            list-style: none
        }

        caption,
        th {
            text-align: left
        }

        q:after,
        q:before {
            content: ""
        }

        sub,
        sup {
            font-size: 75%;
            line-height: 0;
            position: relative
        }

        :root sub,
        :root sup {
            vertical-align: baseline
        }

        sup {
            top: -.5em
        }

        sub {
            bottom: -.25em
        }

        a {
            color: #1abc9c
        }

        a:hover {
            text-decoration: underline
        }

        .typo a {
            border-bottom: 1px solid #1abc9c
        }

        .typo a:hover {
            border-bottom-color: #555;
            color: #555
        }

        .typo a:hover,
        a,
        ins {
            text-decoration: none
        }

        .typo-u,
        u {
            text-decoration: underline
        }

        mark {
            background: #fffdd1;
            border-bottom: 1px solid #ffedce;
            padding: 2px;
            margin: 0 5px
        }

        code,
        pre,
        pre tt {
            font-family: Courier, Courier New, monospace
        }

        pre {
            background: hsla(0, 0%, 97%, .7);
            border: 1px solid #ddd;
            padding: 1em 1.5em;
            display: block;
            -webkit-overflow-scrolling: touch
        }

        hr {
            border: none;
            border-bottom: 1px solid #cfcfcf;
            margin-bottom: .8em;
            height: 10px
        }

        .typo-small,
        figcaption,
        small {
            font-size: .9em;
            color: #888
        }

        b,
        strong {
            font-weight: 700;
            color: #000
        }

        [draggable] {
            cursor: move
        }

        .clearfix:after,
        .clearfix:before {
            content: "";
            display: table
        }

        .clearfix:after {
            clear: both
        }

        .clearfix {
            zoom: 1
        }

        .textwrap,
        .textwrap td,
        .textwrap th {
            word-wrap: break-word;
            word-break: break-all
        }

        .textwrap-table {
            table-layout: fixed
        }

        .serif {
            font-family: Palatino, Optima, Georgia, serif
        }

        .typo-dl,
        .typo-form,
        .typo-hr,
        .typo-ol,
        .typo-p,
        .typo-pre,
        .typo-table,
        .typo-ul,
        .typo dl,
        .typo form,
        .typo hr,
        .typo ol,
        .typo p,
        .typo pre,
        .typo table,
        .typo ul,
        blockquote {
            margin-bottom: 1rem
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            font-family: PingFang SC, Helvetica Neue, Verdana, Microsoft Yahei, Hiragino Sans GB, Microsoft Sans Serif, WenQuanYi Micro Hei, sans-serif;
            color: #000;
            line-height: 1.35
        }

        .typo-h1,
        .typo-h2,
        .typo-h3,
        .typo-h4,
        .typo-h5,
        .typo-h6,
        .typo h1,
        .typo h2,
        .typo h3,
        .typo h4,
        .typo h5,
        .typo h6 {
            margin-top: 1.2em;
            margin-bottom: .6em;
            line-height: 1.35
        }

        .typo-h1,
        .typo h1 {
            font-size: 2em
        }

        .typo-h2,
        .typo h2 {
            font-size: 1.8em
        }

        .typo-h3,
        .typo h3 {
            font-size: 1.6em
        }

        .typo-h4,
        .typo h4 {
            font-size: 1.4em
        }

        .typo-h5,
        .typo-h6,
        .typo h5,
        .typo h6 {
            font-size: 1.2em
        }

        .typo-ul,
        .typo ul {
            margin-left: 1.3em;
            list-style: disc
        }

        .typo-ol,
        .typo ol {
            list-style: decimal;
            margin-left: 1.9em
        }

        .typo-ol ol,
        .typo-ol ul,
        .typo-ul ol,
        .typo-ul ul,
        .typo li ol,
        .typo li ul {
            margin-bottom: .8em;
            margin-left: 2em
        }

        .typo-ol ul,
        .typo-ul ul,
        .typo li ul {
            list-style: circle
        }

        .typo-table td,
        .typo-table th,
        .typo table caption,
        .typo table td,
        .typo table th {
            border: 1px solid #ddd;
            padding: .5em 1em;
            color: #666
        }

        .typo-table th,
        .typo table th {
            background: #fbfbfb
        }

        .typo-table thead th,
        .typo table thead th {
            background: hsla(0, 0%, 95%, .7)
        }

        .typo table caption {
            border-bottom: none
        }

        .typo-input,
        .typo-textarea {
            -webkit-appearance: none;
            border-radius: 0
        }

        .typo-em,
        .typo em,
        caption,
        legend {
            color: #000;
            font-weight: inherit
        }

        .typo-em {
            position: relative
        }

        .typo-em:after {
            position: absolute;
            top: .65em;
            left: 0;
            width: 100%;
            overflow: hidden;
            white-space: nowrap;
            content: "\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB\30FB"
        }

        .typo img {
            max-width: 100%
        }

        .common-content {
            font-weight: 400;
            color: #353535;
            line-height: 1.75rem;
            white-space: normal;
            word-break: normal;
            font-size: 1rem
        }

        .common-content img {
            display: block;
            max-width: 100%;
            background-color: #eee
        }

        .common-content audio,
        .common-content video {
            width: 100%;
            background-color: #eee
        }

        .common-content center,
        .common-content font {
            margin-top: 1rem;
            display: inline-block
        }

        .common-content center {
            width: 100%
        }

        .common-content pre {
            margin-top: 1rem;
            padding-left: 0;
            padding-right: 0;
            position: relative;
            overflow: hidden
        }

        .common-content pre code {
            font-size: .8rem;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            width: 100%;
            box-sizing: border-box;
            padding-left: 1rem;
            padding-right: 1rem;
            overflow-x: auto
        }

        .common-content hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        .common-content b,
        .common-content h1,
        .common-content h2,
        .common-content h3,
        .common-content h4,
        .common-content h5,
        .common-content strong {
            font-weight: 700
        }

        .common-content h1,
        .common-content h2 {
            font-size: 1.125rem;
            margin-bottom: .45rem
        }

        .common-content h3,
        .common-content h4,
        .common-content h5 {
            font-size: 1rem;
            margin-bottom: .45rem
        }

        .common-content p {
            font-weight: 400;
            color: #353535;
            margin-top: .15rem
        }

        .common-content .orange {
            color: #ff5a05
        }

        .common-content .reference {
            font-size: 1rem;
            color: #888
        }

        .custom-rich-content h1 {
            margin-top: 0;
            font-weight: 400;
            font-size: 15.25px;
            border-bottom: 1px solid #eee;
            line-height: 2.8
        }

        .custom-rich-content li,
        .custom-rich-content p {
            font-size: 14px;
            color: #888;
            line-height: 1.6
        }

        table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        table.hljs-ln,
        table.hljs-ln tbody,
        table.hljs-ln td,
        table.hljs-ln tr {
            box-sizing: border-box
        }

        table.hljs-ln td {
            padding: 0;
            border: 0
        }

        table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            user-select: none
        }

        table.hljs-ln td.hljs-ln-code,
        table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            font-size: 12px;
            line-height: 20px;
            vertical-align: top
        }

        table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            color: #24292e;
            word-wrap: normal;
            white-space: pre
        }

        video::-webkit-media-controls {
            overflow: hidden !important
        }

        video::-webkit-media-controls-enclosure {
            width: calc(100% + 32px);
            margin-left: auto
        }

        ._29HP61GA_0 {
            max-width:800px;
            margin:0 auto;
            margin-bottom: 20px;
            font-weight: 400;
            color: #353535;
            line-height: 1.76;
            white-space: normal;
            word-break: normal;
            font-size: 17px;
            -webkit-transition: background-color .3s ease;
            transition: background-color .3s ease
        }

        ._29HP61GA_0 .MathJax_Display {
            overflow: auto
        }

        ._29HP61GA_0 .poster {
            position: fixed;
            left: -10000px;
            top: -10000px;
            overflow: hidden;
            padding: 1rem;
            background: #ececec
        }

        ._29HP61GA_0 .richcontent-pre-copy {
            font-size: 13px;
            color: #888;
            position: absolute;
            right: 1em;
            top: .5em;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 .richcontent-pre-copy .iconfont {
            font-size: 12px;
            margin-right: .2em
        }

        ._29HP61GA_0 a {
            color: #fa8919;
            border-bottom: 1px solid #fa8919
        }

        ._29HP61GA_0 img {
            display: block;
            max-width: 100%;
            position: relative;
            left: 50%;
            -webkit-transform: translateX(-50%);
            transform: translateX(-50%);
            background-color: #eee;
            vertical-align: top;
            border-radius: 0
        }

        ._29HP61GA_0 audio,
        ._29HP61GA_0 video {
            width: 100%;
            background-color: #eee
        }

        ._29HP61GA_0 pre {
            margin-top: 16px;
            padding: 34px 0 0;
            margin-bottom: 30px;
            position: relative;
            border-radius: 6px;
            background: rgba(246, 247, 251, .749);
            border: 0
        }

        ._29HP61GA_0 pre code {
            font-size: 12px;
            font-family: Consolas, Liberation Mono, Menlo, monospace, Courier;
            display: block;
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            margin-left: 16px;
            margin-right: 16px;
            overflow-x: scroll
        }

        ._29HP61GA_0 pre code:after {
            content: "";
            height: 30px;
            width: 100%;
            display: block
        }

        ._29HP61GA_0 hr {
            border: none;
            margin-top: 1.5rem;
            margin-bottom: 1.5rem;
            border-top: 1px solid #f5f5f5;
            height: 1px;
            background: none
        }

        ._29HP61GA_0 h1,
        ._29HP61GA_0 h2,
        ._29HP61GA_0 h3,
        ._29HP61GA_0 h4,
        ._29HP61GA_0 h5 {
            margin-bottom: 20px;
            margin-top: 0;
            font-weight: 700
        }

        ._29HP61GA_0 b,
        ._29HP61GA_0 strong {
            font-weight: 700
        }

        ._29HP61GA_0 h1 {
            font-size: 21px
        }

        ._29HP61GA_0 h2 {
            font-size: 20px
        }

        ._29HP61GA_0 h3 {
            font-size: 19px
        }

        ._29HP61GA_0 h4 {
            font-size: 18px
        }

        ._29HP61GA_0 h5 {
            font-size: 17px
        }

        ._29HP61GA_0 center,
        ._29HP61GA_0 p {
            font-weight: 400;
            color: #353535;
            margin-top: 0;
            margin-bottom: 30px;
            word-break: break-word
        }

        ._29HP61GA_0 center {
            text-align: center
        }

        ._29HP61GA_0 blockquote {
            margin-top: 0;
            margin-bottom: 34px;
            border-left: 3px solid #e8e8e8;
            padding-left: 17px;
            color: #353535
        }

        ._29HP61GA_0 blockquote p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol,
        ._29HP61GA_0 ul {
            margin-bottom: 30px
        }

        ._29HP61GA_0 ol p,
        ._29HP61GA_0 ul p {
            margin-top: 0;
            margin-bottom: 0
        }

        ._29HP61GA_0 ol {
            list-style: decimal;
            margin-left: 20px
        }

        ._29HP61GA_0 ul li {
            padding-left: 17px;
            position: relative;
            margin-bottom: 10px
        }

        ._29HP61GA_0 ul li:after {
            content: "";
            height: 6px;
            width: 6px;
            border-radius: 50%;
            background: #353535;
            position: absolute;
            top: 10px;
            left: 0
        }

        ._29HP61GA_0 .orange {
            color: #fa8919
        }

        ._29HP61GA_0 .reference {
            color: #888
        }

        ._29HP61GA_0 .m-right {
            text-align: right
        }

        ._29HP61GA_0 .m-center {
            text-align: center;
            display: block
        }

        ._29HP61GA_0 .m-gray {
            color: #888
        }

        ._29HP61GA_0 .m-small {
            font-size: 15px
        }

        ._29HP61GA_0 table.hljs-ln {
            margin-bottom: 0;
            border-spacing: 0;
            border-collapse: collapse
        }

        ._29HP61GA_0 table.hljs-ln,
        ._29HP61GA_0 table.hljs-ln tbody,
        ._29HP61GA_0 table.hljs-ln td,
        ._29HP61GA_0 table.hljs-ln tr {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        ._29HP61GA_0 table.hljs-ln td {
            padding: 0;
            border: 0
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            min-width: 15px;
            font-size: 12px;
            color: rgba(27, 31, 35, .3);
            text-align: right;
            white-space: nowrap;
            cursor: pointer;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code,
        ._29HP61GA_0 table.hljs-ln td.hljs-ln-numbers {
            font-family: SFMono-Regular, Consolas, Liberation Mono, Menlo, Courier, monospace;
            line-height: 20px;
            vertical-align: top
        }

        ._29HP61GA_0 table.hljs-ln td.hljs-ln-code {
            position: relative;
            padding-right: 10px;
            padding-left: 10px;
            overflow: visible;
            font-size: 13px;
            color: #666;
            word-wrap: normal;
            white-space: pre
        }

    </style>
</head>
<body>
<div class="_29HP61GA_0">
<h1>28-Immutabilityæ¨¡å¼ï¼šå¦‚ä½•åˆ©ç”¨ä¸å˜æ€§è§£å†³å¹¶å‘é—®é¢˜ï¼Ÿ</h1>
<p>æˆ‘ä»¬æ›¾ç»è¯´è¿‡ï¼Œâ€œå¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å†™åŒä¸€å…±äº«å˜é‡å­˜åœ¨å¹¶å‘é—®é¢˜â€ï¼Œè¿™é‡Œçš„å¿…è¦æ¡ä»¶ä¹‹ä¸€æ˜¯è¯»å†™ï¼Œå¦‚æœåªæœ‰è¯»ï¼Œè€Œæ²¡æœ‰å†™ï¼Œæ˜¯æ²¡æœ‰å¹¶å‘é—®é¢˜çš„ã€‚</p><p>è§£å†³å¹¶å‘é—®é¢˜ï¼Œå…¶å®æœ€ç®€å•çš„åŠæ³•å°±æ˜¯è®©å…±äº«å˜é‡åªæœ‰è¯»æ“ä½œï¼Œè€Œæ²¡æœ‰å†™æ“ä½œã€‚è¿™ä¸ªåŠæ³•å¦‚æ­¤é‡è¦ï¼Œä»¥è‡³äºè¢«ä¸Šå‡åˆ°äº†ä¸€ç§è§£å†³å¹¶å‘é—®é¢˜çš„è®¾è®¡æ¨¡å¼ï¼š<strong>ä¸å˜æ€§ï¼ˆImmutabilityï¼‰æ¨¡å¼</strong>ã€‚æ‰€è°“<strong>ä¸å˜æ€§ï¼Œç®€å•æ¥è®²ï¼Œå°±æ˜¯å¯¹è±¡ä¸€æ—¦è¢«åˆ›å»ºä¹‹åï¼ŒçŠ¶æ€å°±ä¸å†å‘ç”Ÿå˜åŒ–</strong>ã€‚æ¢å¥è¯è¯´ï¼Œå°±æ˜¯å˜é‡ä¸€æ—¦è¢«èµ‹å€¼ï¼Œå°±ä¸å…è®¸ä¿®æ”¹äº†ï¼ˆæ²¡æœ‰å†™æ“ä½œï¼‰ï¼›æ²¡æœ‰ä¿®æ”¹æ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¿æŒäº†ä¸å˜æ€§ã€‚</p><h2>å¿«é€Ÿå®ç°å…·å¤‡ä¸å¯å˜æ€§çš„ç±»</h2><p>å®ç°ä¸€ä¸ªå…·å¤‡ä¸å¯å˜æ€§çš„ç±»ï¼Œè¿˜æ˜¯æŒºç®€å•çš„ã€‚<strong>å°†ä¸€ä¸ªç±»æ‰€æœ‰çš„å±æ€§éƒ½è®¾ç½®æˆfinalçš„ï¼Œå¹¶ä¸”åªå…è®¸å­˜åœ¨åªè¯»æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»åŸºæœ¬ä¸Šå°±å…·å¤‡ä¸å¯å˜æ€§äº†</strong>ã€‚æ›´ä¸¥æ ¼çš„åšæ³•æ˜¯<strong>è¿™ä¸ªç±»æœ¬èº«ä¹Ÿæ˜¯finalçš„</strong>ï¼Œä¹Ÿå°±æ˜¯ä¸å…è®¸ç»§æ‰¿ã€‚å› ä¸ºå­ç±»å¯ä»¥è¦†ç›–çˆ¶ç±»çš„æ–¹æ³•ï¼Œæœ‰å¯èƒ½æ”¹å˜ä¸å¯å˜æ€§ï¼Œæ‰€ä»¥æ¨èä½ åœ¨å®é™…å·¥ä½œä¸­ï¼Œä½¿ç”¨è¿™ç§æ›´ä¸¥æ ¼çš„åšæ³•ã€‚</p><p>Java SDKé‡Œå¾ˆå¤šç±»éƒ½å…·å¤‡ä¸å¯å˜æ€§ï¼Œåªæ˜¯ç”±äºå®ƒä»¬çš„ä½¿ç”¨å¤ªç®€å•ï¼Œæœ€ååè€Œè¢«å¿½ç•¥äº†ã€‚ä¾‹å¦‚ç»å¸¸ç”¨åˆ°çš„Stringå’ŒLongã€Integerã€Doubleç­‰åŸºç¡€ç±»å‹çš„åŒ…è£…ç±»éƒ½å…·å¤‡ä¸å¯å˜æ€§ï¼Œè¿™äº›å¯¹è±¡çš„çº¿ç¨‹å®‰å…¨æ€§éƒ½æ˜¯é ä¸å¯å˜æ€§æ¥ä¿è¯çš„ã€‚å¦‚æœä½ ä»”ç»†ç¿»çœ‹è¿™äº›ç±»çš„å£°æ˜ã€å±æ€§å’Œæ–¹æ³•ï¼Œä½ ä¼šå‘ç°å®ƒä»¬éƒ½ä¸¥æ ¼éµå®ˆä¸å¯å˜ç±»çš„ä¸‰ç‚¹è¦æ±‚ï¼š<strong>ç±»å’Œå±æ€§éƒ½æ˜¯finalçš„ï¼Œæ‰€æœ‰æ–¹æ³•å‡æ˜¯åªè¯»çš„</strong>ã€‚</p><!-- [[[read_end]]] --><p>çœ‹åˆ°è¿™é‡Œä½ å¯èƒ½ä¼šç–‘æƒ‘ï¼ŒJavaçš„Stringæ–¹æ³•ä¹Ÿæœ‰ç±»ä¼¼å­—ç¬¦æ›¿æ¢æ“ä½œï¼Œæ€ä¹ˆèƒ½è¯´æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åªè¯»çš„å‘¢ï¼Ÿæˆ‘ä»¬ç»“åˆStringçš„æºä»£ç æ¥è§£é‡Šä¸€ä¸‹è¿™ä¸ªé—®é¢˜ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä»£ç æºè‡ªJava 1.8 SDKï¼Œæˆ‘ç•¥åšäº†ä¿®æ”¹ï¼Œä»…ä¿ç•™äº†å…³é”®å±æ€§value[]å’Œreplace()æ–¹æ³•ï¼Œä½ ä¼šå‘ç°ï¼šStringè¿™ä¸ªç±»ä»¥åŠå®ƒçš„å±æ€§value[]éƒ½æ˜¯finalçš„ï¼›è€Œreplace()æ–¹æ³•çš„å®ç°ï¼Œå°±çš„ç¡®æ²¡æœ‰ä¿®æ”¹value[]ï¼Œè€Œæ˜¯å°†æ›¿æ¢åçš„å­—ç¬¦ä¸²ä½œä¸ºè¿”å›å€¼è¿”å›äº†ã€‚</p><pre><code>public final class String {
  private final char value[];
  // å­—ç¬¦æ›¿æ¢
  String replace(char oldChar, 
      char newChar) {
    //æ— éœ€æ›¿æ¢ï¼Œç›´æ¥è¿”å›this  
    if (oldChar == newChar){
      return this;
    }

    int len = value.length;
    int i = -1;
    /* avoid getfield opcode */
    char[] val = value; 
    //å®šä½åˆ°éœ€è¦æ›¿æ¢çš„å­—ç¬¦ä½ç½®
    while (++i &lt; len) {
      if (val[i] == oldChar) {
        break;
      }
    }
    //æœªæ‰¾åˆ°oldCharï¼Œæ— éœ€æ›¿æ¢
    if (i &gt;= len) {
      return this;
    } 
    //åˆ›å»ºä¸€ä¸ªbuf[]ï¼Œè¿™æ˜¯å…³é”®
    //ç”¨æ¥ä¿å­˜æ›¿æ¢åçš„å­—ç¬¦ä¸²
    char buf[] = new char[len];
    for (int j = 0; j &lt; i; j++) {
      buf[j] = val[j];
    }
    while (i &lt; len) {
      char c = val[i];
      buf[i] = (c == oldChar) ? 
        newChar : c;
      i++;
    }
    //åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²è¿”å›
    //åŸå­—ç¬¦ä¸²ä¸ä¼šå‘ç”Ÿä»»ä½•å˜åŒ–
    return new String(buf, true);
  }
}
</code></pre><p>é€šè¿‡åˆ†æStringçš„å®ç°ï¼Œä½ å¯èƒ½å·²ç»å‘ç°äº†ï¼Œå¦‚æœå…·å¤‡ä¸å¯å˜æ€§çš„ç±»ï¼Œéœ€è¦æä¾›ç±»ä¼¼ä¿®æ”¹çš„åŠŸèƒ½ï¼Œå…·ä½“è¯¥æ€ä¹ˆæ“ä½œå‘¢ï¼Ÿåšæ³•å¾ˆç®€å•ï¼Œé‚£å°±æ˜¯<strong>åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸å¯å˜å¯¹è±¡</strong>ï¼Œè¿™æ˜¯ä¸å¯å˜å¯¹è±¡çš„ä¸€ä¸ªé‡è¦åŒºåˆ«ï¼Œå¯å˜å¯¹è±¡å¾€å¾€æ˜¯ä¿®æ”¹è‡ªå·±çš„å±æ€§ã€‚</p><p>æ‰€æœ‰çš„ä¿®æ”¹æ“ä½œéƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„ä¸å¯å˜å¯¹è±¡ï¼Œä½ å¯èƒ½ä¼šæœ‰è¿™ç§æ‹…å¿ƒï¼šæ˜¯ä¸æ˜¯åˆ›å»ºçš„å¯¹è±¡å¤ªå¤šäº†ï¼Œæœ‰ç‚¹å¤ªæµªè´¹å†…å­˜å‘¢ï¼Ÿæ˜¯çš„ï¼Œè¿™æ ·åšçš„ç¡®æœ‰äº›æµªè´¹ï¼Œé‚£å¦‚ä½•è§£å†³å‘¢ï¼Ÿ</p><h2>åˆ©ç”¨äº«å…ƒæ¨¡å¼é¿å…åˆ›å»ºé‡å¤å¯¹è±¡</h2><p>å¦‚æœä½ ç†Ÿæ‚‰é¢å‘å¯¹è±¡ç›¸å…³çš„è®¾è®¡æ¨¡å¼ï¼Œç›¸ä¿¡ä½ ä¸€å®šèƒ½æƒ³åˆ°<strong>äº«å…ƒæ¨¡å¼ï¼ˆFlyweight Patternï¼‰ã€‚åˆ©ç”¨äº«å…ƒæ¨¡å¼å¯ä»¥å‡å°‘åˆ›å»ºå¯¹è±¡çš„æ•°é‡ï¼Œä»è€Œå‡å°‘å†…å­˜å ç”¨ã€‚</strong>Javaè¯­è¨€é‡Œé¢Longã€Integerã€Shortã€Byteç­‰è¿™äº›åŸºæœ¬æ•°æ®ç±»å‹çš„åŒ…è£…ç±»éƒ½ç”¨åˆ°äº†äº«å…ƒæ¨¡å¼ã€‚</p><p>ä¸‹é¢æˆ‘ä»¬å°±ä»¥Longè¿™ä¸ªç±»ä½œä¸ºä¾‹å­ï¼Œçœ‹çœ‹å®ƒæ˜¯å¦‚ä½•åˆ©ç”¨äº«å…ƒæ¨¡å¼æ¥ä¼˜åŒ–å¯¹è±¡çš„åˆ›å»ºçš„ã€‚</p><p>äº«å…ƒæ¨¡å¼æœ¬è´¨ä¸Šå…¶å®å°±æ˜¯ä¸€ä¸ª<strong>å¯¹è±¡æ± </strong>ï¼Œåˆ©ç”¨äº«å…ƒæ¨¡å¼åˆ›å»ºå¯¹è±¡çš„é€»è¾‘ä¹Ÿå¾ˆç®€å•ï¼šåˆ›å»ºä¹‹å‰ï¼Œé¦–å…ˆå»å¯¹è±¡æ± é‡Œçœ‹çœ‹æ˜¯ä¸æ˜¯å­˜åœ¨ï¼›å¦‚æœå·²ç»å­˜åœ¨ï¼Œå°±åˆ©ç”¨å¯¹è±¡æ± é‡Œçš„å¯¹è±¡ï¼›å¦‚æœä¸å­˜åœ¨ï¼Œå°±ä¼šæ–°åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œå¹¶ä¸”æŠŠè¿™ä¸ªæ–°åˆ›å»ºå‡ºæ¥çš„å¯¹è±¡æ”¾è¿›å¯¹è±¡æ± é‡Œã€‚</p><p>Longè¿™ä¸ªç±»å¹¶æ²¡æœ‰ç…§æ¬äº«å…ƒæ¨¡å¼ï¼ŒLongå†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªé™æ€çš„å¯¹è±¡æ± ï¼Œä»…ç¼“å­˜äº†[-128,127]ä¹‹é—´çš„æ•°å­—ï¼Œè¿™ä¸ªå¯¹è±¡æ± åœ¨JVMå¯åŠ¨çš„æ—¶å€™å°±åˆ›å»ºå¥½äº†ï¼Œè€Œä¸”è¿™ä¸ªå¯¹è±¡æ± ä¸€ç›´éƒ½ä¸ä¼šå˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒæ˜¯é™æ€çš„ã€‚ä¹‹æ‰€ä»¥é‡‡ç”¨è¿™æ ·çš„è®¾è®¡ï¼Œæ˜¯å› ä¸ºLongè¿™ä¸ªå¯¹è±¡çš„çŠ¶æ€å…±æœ‰ 2<sup>64</sup> ç§ï¼Œå®åœ¨å¤ªå¤šï¼Œä¸å®œå…¨éƒ¨ç¼“å­˜ï¼Œè€Œ[-128,127]ä¹‹é—´çš„æ•°å­—åˆ©ç”¨ç‡æœ€é«˜ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç å‡ºè‡ªJava 1.8ï¼ŒvalueOf()æ–¹æ³•å°±ç”¨åˆ°äº†LongCacheè¿™ä¸ªç¼“å­˜ï¼Œä½ å¯ä»¥ç»“åˆç€æ¥åŠ æ·±ç†è§£ã€‚</p><pre><code>Long valueOf(long l) {
  final int offset = 128;
  // [-128,127]ç›´æ¥çš„æ•°å­—åšäº†ç¼“å­˜
  if (l &gt;= -128 &amp;&amp; l &lt;= 127) { 
    return LongCache
      .cache[(int)l + offset];
  }
  return new Long(l);
}
//ç¼“å­˜ï¼Œç­‰ä»·äºå¯¹è±¡æ± 
//ä»…ç¼“å­˜[-128,127]ç›´æ¥çš„æ•°å­—
static class LongCache {
  static final Long cache[] 
    = new Long[-(-128) + 127 + 1];

  static {
    for(int i=0; i&lt;cache.length; i++)
      cache[i] = new Long(i-128);
  }
}
</code></pre><p>å‰é¢æˆ‘ä»¬åœ¨<a href="https://time.geekbang.org/column/article/87749">ã€Š13 | ç†è®ºåŸºç¡€æ¨¡å—çƒ­ç‚¹é—®é¢˜ç­”ç–‘ã€‹</a>ä¸­æåˆ°â€œInteger å’Œ String ç±»å‹çš„å¯¹è±¡ä¸é€‚åˆåšé”â€ï¼Œå…¶å®åŸºæœ¬ä¸Šæ‰€æœ‰çš„åŸºç¡€ç±»å‹çš„åŒ…è£…ç±»éƒ½ä¸é€‚åˆåšé”ï¼Œå› ä¸ºå®ƒä»¬å†…éƒ¨ç”¨åˆ°äº†äº«å…ƒæ¨¡å¼ï¼Œè¿™ä¼šå¯¼è‡´çœ‹ä¸Šå»ç§æœ‰çš„é”ï¼Œå…¶å®æ˜¯å…±æœ‰çš„ã€‚ä¾‹å¦‚åœ¨ä¸‹é¢ä»£ç ä¸­ï¼Œæœ¬æ„æ˜¯Aç”¨é”alï¼ŒBç”¨é”blï¼Œå„è‡ªç®¡ç†å„è‡ªçš„ï¼Œäº’ä¸å½±å“ã€‚ä½†å®é™…ä¸Šalå’Œblæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œç»“æœAå’ŒBå…±ç”¨çš„æ˜¯ä¸€æŠŠé”ã€‚</p><pre><code>class A {
  Long al=Long.valueOf(1);
  public void setAX(){
    synchronized (al) {
      //çœç•¥ä»£ç æ— æ•°
    }
  }
}
class B {
  Long bl=Long.valueOf(1);
  public void setBY(){
    synchronized (bl) {
      //çœç•¥ä»£ç æ— æ•°
    }
  }
}
</code></pre><h2>ä½¿ç”¨Immutabilityæ¨¡å¼çš„æ³¨æ„äº‹é¡¹</h2><p>åœ¨ä½¿ç”¨Immutabilityæ¨¡å¼çš„æ—¶å€™ï¼Œéœ€è¦æ³¨æ„ä»¥ä¸‹ä¸¤ç‚¹ï¼š</p><ol>
<li>å¯¹è±¡çš„æ‰€æœ‰å±æ€§éƒ½æ˜¯finalçš„ï¼Œå¹¶ä¸èƒ½ä¿è¯ä¸å¯å˜æ€§ï¼›</li>
<li>ä¸å¯å˜å¯¹è±¡ä¹Ÿéœ€è¦æ­£ç¡®å‘å¸ƒã€‚</li>
</ol><p>åœ¨Javaè¯­è¨€ä¸­ï¼Œfinalä¿®é¥°çš„å±æ€§ä¸€æ—¦è¢«èµ‹å€¼ï¼Œå°±ä¸å¯ä»¥å†ä¿®æ”¹ï¼Œä½†æ˜¯å¦‚æœå±æ€§çš„ç±»å‹æ˜¯æ™®é€šå¯¹è±¡ï¼Œé‚£ä¹ˆè¿™ä¸ªæ™®é€šå¯¹è±¡çš„å±æ€§æ˜¯å¯ä»¥è¢«ä¿®æ”¹çš„ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä»£ç ä¸­ï¼ŒBarçš„å±æ€§fooè™½ç„¶æ˜¯finalçš„ï¼Œä¾ç„¶å¯ä»¥é€šè¿‡setAge()æ–¹æ³•æ¥è®¾ç½®fooçš„å±æ€§ageã€‚æ‰€ä»¥ï¼Œ<strong>åœ¨ä½¿ç”¨Immutabilityæ¨¡å¼çš„æ—¶å€™ä¸€å®šè¦ç¡®è®¤ä¿æŒä¸å˜æ€§çš„è¾¹ç•Œåœ¨å“ªé‡Œï¼Œæ˜¯å¦è¦æ±‚å±æ€§å¯¹è±¡ä¹Ÿå…·å¤‡ä¸å¯å˜æ€§</strong>ã€‚</p><pre><code>class Foo{
  int age=0;
  int name=&quot;abc&quot;;
}
final class Bar {
  final Foo foo;
  void setAge(int a){
    foo.age=a;
  }
}
</code></pre><p>ä¸‹é¢æˆ‘ä»¬å†çœ‹çœ‹å¦‚ä½•æ­£ç¡®åœ°å‘å¸ƒä¸å¯å˜å¯¹è±¡ã€‚ä¸å¯å˜å¯¹è±¡è™½ç„¶æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½†æ˜¯å¹¶ä¸æ„å‘³ç€å¼•ç”¨è¿™äº›ä¸å¯å˜å¯¹è±¡çš„å¯¹è±¡å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ä¾‹å¦‚åœ¨ä¸‹é¢çš„ä»£ç ä¸­ï¼ŒFooå…·å¤‡ä¸å¯å˜æ€§ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œä½†æ˜¯ç±»Barå¹¶ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œç±»Barä¸­æŒæœ‰å¯¹Fooçš„å¼•ç”¨fooï¼Œå¯¹fooè¿™ä¸ªå¼•ç”¨çš„ä¿®æ”¹åœ¨å¤šçº¿ç¨‹ä¸­å¹¶ä¸èƒ½ä¿è¯å¯è§æ€§å’ŒåŸå­æ€§ã€‚</p><pre><code>//Fooçº¿ç¨‹å®‰å…¨
final class Foo{
  final int age=0;
  final int name=&quot;abc&quot;;
}
//Barçº¿ç¨‹ä¸å®‰å…¨
class Bar {
  Foo foo;
  void setFoo(Foo f){
    this.foo=f;
  }
}
</code></pre><p>å¦‚æœä½ çš„ç¨‹åºä»…ä»…éœ€è¦fooä¿æŒå¯è§æ€§ï¼Œæ— éœ€ä¿è¯åŸå­æ€§ï¼Œé‚£ä¹ˆå¯ä»¥å°†fooå£°æ˜ä¸ºvolatileå˜é‡ï¼Œè¿™æ ·å°±èƒ½ä¿è¯å¯è§æ€§ã€‚å¦‚æœä½ çš„ç¨‹åºéœ€è¦ä¿è¯åŸå­æ€§ï¼Œé‚£ä¹ˆå¯ä»¥é€šè¿‡åŸå­ç±»æ¥å®ç°ã€‚ä¸‹é¢çš„ç¤ºä¾‹ä»£ç æ˜¯åˆç†åº“å­˜çš„åŸå­åŒ–å®ç°ï¼Œä½ åº”è¯¥å¾ˆç†Ÿæ‚‰äº†ï¼Œå…¶ä¸­å°±æ˜¯ç”¨åŸå­ç±»è§£å†³äº†ä¸å¯å˜å¯¹è±¡å¼•ç”¨çš„åŸå­æ€§é—®é¢˜ã€‚</p><pre><code>public class SafeWM {
  class WMRange{
    final int upper;
    final int lower;
    WMRange(int upper,int lower){
    //çœç•¥æ„é€ å‡½æ•°å®ç°
    }
  }
  final AtomicReference&lt;WMRange&gt;
    rf = new AtomicReference&lt;&gt;(
      new WMRange(0,0)
    );
  // è®¾ç½®åº“å­˜ä¸Šé™
  void setUpper(int v){
    while(true){
      WMRange or = rf.get();
      // æ£€æŸ¥å‚æ•°åˆæ³•æ€§
      if(v &lt; or.lower){
        throw new IllegalArgumentException();
      }
      WMRange nr = new
          WMRange(v, or.lower);
      if(rf.compareAndSet(or, nr)){
        return;
      }
    }
  }
}
</code></pre><h2>æ€»ç»“</h2><p>åˆ©ç”¨Immutabilityæ¨¡å¼è§£å†³å¹¶å‘é—®é¢˜ï¼Œä¹Ÿè®¸ä½ è§‰å¾—æœ‰ç‚¹é™Œç”Ÿï¼Œå…¶å®ä½ å¤©å¤©éƒ½åœ¨äº«å—å®ƒçš„æˆ˜æœã€‚Javaè¯­è¨€é‡Œé¢çš„Stringå’ŒLongã€Integerã€Doubleç­‰åŸºç¡€ç±»å‹çš„åŒ…è£…ç±»éƒ½å…·å¤‡ä¸å¯å˜æ€§ï¼Œè¿™äº›å¯¹è±¡çš„çº¿ç¨‹å®‰å…¨æ€§éƒ½æ˜¯é ä¸å¯å˜æ€§æ¥ä¿è¯çš„ã€‚Immutabilityæ¨¡å¼æ˜¯æœ€ç®€å•çš„è§£å†³å¹¶å‘é—®é¢˜çš„æ–¹æ³•ï¼Œå»ºè®®å½“ä½ è¯•å›¾è§£å†³ä¸€ä¸ªå¹¶å‘é—®é¢˜æ—¶ï¼Œå¯ä»¥é¦–å…ˆå°è¯•ä¸€ä¸‹Immutabilityæ¨¡å¼ï¼Œçœ‹æ˜¯å¦èƒ½å¤Ÿå¿«é€Ÿè§£å†³ã€‚</p><p>å…·å¤‡ä¸å˜æ€§çš„å¯¹è±¡ï¼Œåªæœ‰ä¸€ç§çŠ¶æ€ï¼Œè¿™ä¸ªçŠ¶æ€ç”±å¯¹è±¡å†…éƒ¨æ‰€æœ‰çš„ä¸å˜å±æ€§å…±åŒå†³å®šã€‚å…¶å®è¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„ä¸å˜æ€§å¯¹è±¡ï¼Œé‚£å°±æ˜¯<strong>æ— çŠ¶æ€</strong>ã€‚æ— çŠ¶æ€å¯¹è±¡å†…éƒ¨æ²¡æœ‰å±æ€§ï¼Œåªæœ‰æ–¹æ³•ã€‚é™¤äº†æ— çŠ¶æ€çš„å¯¹è±¡ï¼Œä½ å¯èƒ½è¿˜å¬è¯´è¿‡æ— çŠ¶æ€çš„æœåŠ¡ã€æ— çŠ¶æ€çš„åè®®ç­‰ç­‰ã€‚æ— çŠ¶æ€æœ‰å¾ˆå¤šå¥½å¤„ï¼Œæœ€æ ¸å¿ƒçš„ä¸€ç‚¹å°±æ˜¯æ€§èƒ½ã€‚åœ¨å¤šçº¿ç¨‹é¢†åŸŸï¼Œæ— çŠ¶æ€å¯¹è±¡æ²¡æœ‰çº¿ç¨‹å®‰å…¨é—®é¢˜ï¼Œæ— éœ€åŒæ­¥å¤„ç†ï¼Œè‡ªç„¶æ€§èƒ½å¾ˆå¥½ï¼›åœ¨åˆ†å¸ƒå¼é¢†åŸŸï¼Œæ— çŠ¶æ€æ„å‘³ç€å¯ä»¥æ— é™åœ°æ°´å¹³æ‰©å±•ï¼Œæ‰€ä»¥åˆ†å¸ƒå¼é¢†åŸŸé‡Œé¢æ€§èƒ½çš„ç“¶é¢ˆä¸€å®šä¸æ˜¯å‡ºåœ¨æ— çŠ¶æ€çš„æœåŠ¡èŠ‚ç‚¹ä¸Šã€‚</p><h2>è¯¾åæ€è€ƒ</h2><p>ä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä¸­ï¼ŒAccountçš„å±æ€§æ˜¯finalçš„ï¼Œå¹¶ä¸”åªæœ‰getæ–¹æ³•ï¼Œé‚£è¿™ä¸ªç±»æ˜¯ä¸æ˜¯å…·å¤‡ä¸å¯å˜æ€§å‘¢ï¼Ÿ</p><pre><code>public final class Account{
  private final 
    StringBuffer user;
  public Account(String user){
    this.user = 
      new StringBuffer(user);
  }
  
  public StringBuffer getUser(){
    return this.user;
  }
  public String toString(){
    return &quot;user&quot;+user;
  }
}
</code></pre><p>æ¬¢è¿åœ¨ç•™è¨€åŒºä¸æˆ‘åˆ†äº«ä½ çš„æƒ³æ³•ï¼Œä¹Ÿæ¬¢è¿ä½ åœ¨ç•™è¨€åŒºè®°å½•ä½ çš„æ€è€ƒè¿‡ç¨‹ã€‚æ„Ÿè°¢é˜…è¯»ï¼Œå¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰å¸®åŠ©çš„è¯ï¼Œä¹Ÿæ¬¢è¿æŠŠå®ƒåˆ†äº«ç»™æ›´å¤šçš„æœ‹å‹ã€‚</p><p><img src="https://static001.geekbang.org/resource/image/cf/aa/cf393cd748a4f0e6451807c4b61843aa.jpg" alt=""></p><h2>ç²¾é€‰ç•™è¨€ï¼š</h2>
        <ul>
        
<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            Jialin  2019-05-02 14:30:41
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æ ¹æ®æ–‡ç« å†…å®¹,ä¸€ä¸ªç±»å…·å¤‡ä¸å¯å˜å±æ€§éœ€è¦æ»¡è¶³&quot;ç±»å’Œå±æ€§éƒ½å¿…é¡»æ˜¯ final çš„,æ‰€æœ‰æ–¹æ³•å‡æ˜¯åªè¯»çš„&quot;,ç±»çš„å±æ€§å¦‚æœæ˜¯å¼•ç”¨å‹,è¯¥å±æ€§å¯¹åº”çš„ç±»ä¹Ÿéœ€è¦æ»¡è¶³ä¸å¯å˜ç±»çš„æ¡ä»¶,ä¸”ä¸èƒ½æä¾›ä¿®æ”¹è¯¥å±æ€§çš„æ–¹æ³•,<br>Accountç±»çš„å”¯ä¸€å±æ€§useræ˜¯finalçš„,æä¾›çš„æ–¹æ³•æ˜¯å¯è¯»çš„,userçš„ç±»å‹æ˜¯StringBuffer,StringBufferä¹Ÿæ˜¯finalçš„,è¿™æ ·çœ‹æ¥,Accountç±»æ˜¯ä¸å¯å˜æ€§çš„,ä½†æ˜¯å»çœ‹StringBufferçš„æºç ,ä½ ä¼šå‘ç°StringBufferç±»çš„å±æ€§valueæ˜¯å¯å˜çš„&lt;Stringç±»ä¸­çš„valueå®šä¹‰:private final char value[];StringBufferç±»ä¸­çš„valueå®šä¹‰:char[] value;&gt;,å¹¶ä¸”æä¾›äº†append(Object object)å’ŒsetCharAt(int index, char ch)ä¿®æ”¹value.<br>æ‰€ä»¥,Accountç±»ä¸å…·å¤‡ä¸å¯å˜æ€§ [1èµ]
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            QQæ€ª  2019-05-02 17:05:44
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            ä¸å…·å¤‡ä¸å¯å˜æ€§,åŸå› æ˜¯stringbufferç±»å­˜åœ¨æ›´æ”¹userå¯¹è±¡æ–¹æ³• 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            å‘æ¡æ©™å­ ã€‚  2019-05-02 10:51:18
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            è€å¸ˆäº”ä¸€èŠ‚æ—¥å¿«ä¹ã€‚<br><br>æ€è€ƒé¢˜ ï¼š<br>ä¸å¯å˜ç±»çš„ä¸‰è¦ç´  ï¼šç±»ã€å±æ€§ã€æ–¹æ³•éƒ½æ˜¯ä¸å¯å˜çš„ã€‚ æ€è€ƒé¢˜è¿™ä¸ªç±»è™½ç„¶æ˜¯final ï¼Œå±æ€§ä¹Ÿæ˜¯finalå¹¶ä¸”æ²¡æœ‰ä¿®æ”¹çš„æ–¹æ³• ï¼Œ ä½†æ˜¯ stringbufferè¿™ä¸ªå±æ€§çš„å†…å®¹æ˜¯å¯å˜çš„ ï¼Œ æ‰€ä»¥åº”è¯¥æ²¡æœ‰æ»¡è¶³ä¸‰è¦ç´ ä¸­çš„å±æ€§ä¸å¯å˜ ï¼Œ åº”è¯¥ä¸å±äºä¸å¯å˜ç±» ã€‚<br><br><br>å¦å¤–è€å¸ˆæˆ‘æœ‰ä¸ªé—®é¢˜æƒ³é—®ä¸‹ï¼Œ æˆ‘çœ‹jdkä¸€äº›æºç é‡Œï¼Œä¹Ÿç”¨äº†å¯¹è±¡åšé”ã€‚ ä¾‹å¦‚ æˆ‘æœ‰ä¸ªå˜é‡ final  ConcurrentHashMap cache , æœ‰äº›æ–¹æ³•ä¸­ä¼šå¯¹ cacheå˜é‡ putæ–°çš„å€¼ ï¼Œ ä½†æ˜¯è¿˜æœ‰ç”¨è¿™ä¸ªå¯¹è±¡åš synchronized(cache) å¯¹è±¡é” ï¼Œ è¿™ç§åšæ³•å¯¹ä¹ˆï¼Ÿ å¦‚æœå¯¹çš„è¯ï¼Œæ˜¯å› ä¸ºç®¡ç¨‹åªåˆ¤æ–­å¯¹è±¡çš„é¦–åœ°å€æ²¡æœ‰æ”¹å˜çš„åŸå› ä¹ˆ ï¼Œå¸Œæœ›è€å¸ˆæŒ‡ç‚¹ä¸€ä¸‹ğŸ˜ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            MiracleCM  2019-05-02 09:05:32
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘è®¤ä¸ºä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ å› ä¸ºå¾—åˆ°çš„stringbuffer æä¾›äº†æ–¹æ³•æ”¹å˜userã€‚è¯·è€å¸ˆæŒ‡ç‚¹ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            æœ¨æœ¨åŒ   2019-05-02 08:24:48
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            Account çš„å±æ€§æ˜¯ final çš„ï¼Œè€Œä¸”åªæœ‰getæ–¹æ³•ï¼Œä»è¿™é‡Œè€ƒè™‘ï¼Œç¡®å®è§‰å¾—è¿™ä¸ªç±»ä¸å¯å˜ï¼Œä½†æ˜¯è¿™ä¸ªç±»çš„å¼•ç”¨æŒ‡å‘userå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡çš„ç»“æ„æ²¡æœ‰è¯´æ˜ï¼Œé‚£ä¹ˆå°±æœ‰å¯èƒ½è¿™ä¸ªå¯¹è±¡é‡Œé¢çš„å±æ€§å¯å˜ï¼Œæ‰€ä»¥å°±ä¼šå¯¼è‡´è™½ç„¶Account ä¸å¯å˜ï¼Œä½†æ˜¯Userå±æ€§æ˜¯å¯å˜çš„ã€‚æ‰€ä»¥è¿™ä¸ªç±»ä¸å…·æœ‰ä¸å¯å˜æ€§ã€‚ 
        </div>
        
    </div>
</li>
            
<br/>

<li>
    <div>
        <div style="color: #888;font-size:15.25px;font-weight:400;line-height:1.2">
            é«˜æº  2019-05-02 08:13:13
        </div>
        <div style="color:#353535;font-weight:400;white-space:normal;word-break:break-all;line-height:1.6">
            æˆ‘çš„ç†è§£ä»ç±»åˆ°å±æ€§éƒ½è®¾ç½®äº†finalï¼Œå¹¶ä¸”å†…éƒ¨æ²¡æœ‰å…¶å®ƒçš„æ™®é€šå±æ€§æ¥æ›´æ”¹ã€‚ 
        </div>
        
    </div>
</li>
            </ul>
</div>
</body>
</html>